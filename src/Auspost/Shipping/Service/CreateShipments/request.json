{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "CreateShipments",
    "description": "This interface creates a shipment with items and returns a summary of the pricing for the items.",
    "type": "object",
    "definitions": {
        "feature": {
            "_comment": "used to define items features",
            "description": "Name of the feature. Eg: TRANSIT_COVER.",
            "type": "object",
            "properties": {
                "attributes": {
                    "description": "Additional information about the feature. Please note that attributes depend on the feature.",
                    "type": "object",
                    "properties": {
                        "cover_amount": {
                            "description": "Cover amount",
                            "type": "number"
                        }
                    }
                }
            }
        }
    },
    "properties": {
        "shipments": {
            "type": "array",
            "items": {
                "properties": {
                    "shipment_reference": {
                        "description": "A unique reference for the shipment, generated by the merchant.",
                        "type": "string",
                        "maxLength": 50
                    },
                    "customer_reference_1": {
                        "description": "A merchant specified reference for the shipment. This value is not required to be unique.",
                        "type": "string",
                        "maxLength": 50
                    },
                    "customer_reference_2": {
                        "description": "The width of the parcel in centimetres. If volumetric pricing applies then this is mandatory.",
                        "type": "string",
                        "maxLength": 50
                    },
                    "email_tracking_enabled": {
                        "description": "Whether the recipient of the shipment will receive tracking notification email. The email address of the receiver must be provided if the email_tracking_enabled field is set to true.",
                        "type": "boolean"
                    },
                    "from": {
                        "description": "The address where the items will be sent from.",
                        "type": "object",
                        "properties": {
                            "name": {
                                "description": "The name of the sender.",
                                "type": "string",
                                "maxLength": 40
                            },
                            "type": {
                                "description": "The type of address. If this field is supplied, its value must be 'MERCHANT_LOCATION'.",
                                "type": "string"
                            },
                            "lines": {
                                "description": "The address lines of the address. Minimum of one address line, up to a maximum of three. The second address line can accommodate up to 60 characters.",
                                "type": "array",
                                "items": [
                                    {
                                    "type": "string",
                                    "maxLength": 40
                                    },
                                    {
                                    "type": "string",
                                    "maxLength": 60
                                    },
                                    {
                                    "type": "string",
                                    "maxLength": 40
                                    }
                                ],
                                "minItems": 1,
                                "maxItems":3
                            },
                            "suburb": {
                                "description": "The suburb for the address.",
                                "type": "string",
                                "maxLength": 40
                            },
                            "state": {
                                "description": "The state code for the address. Valid values are: ACT, NSW, NT, QLD, SA, TAS, VIC, WA.",
                                "type": "string",
                                "maxLength": 3
                            },
                            "postcode": {
                                "description": "The postcode for the address.",
                                "type": "string",
                                "maxLength": 4
                            },
                            "country": {
                                "description": "The country code for the address.",
                                "type": "string",
                                "maxLength": 2
                            },
                            "phone": {
                                "description": "The sender’s phone number.",
                                "type": "string",
                                "maxLength": 20
                            },
                            "email": {
                                "description": "The sender’s email address.",
                                "type": "string",
                                "maxLength": 50
                            }
                        },
                        "required": ["name","lines","suburb","state","postcode"]
                    },
                    "to": {
                        "description": "The address where the items will be delivered.",
                        "type": "object",
                        "properties": {
                            "name": {
                                "description": "The name of the receiver.",
                                "type": "string",
                                "maxLength": 35
                            },
                            "acpn": {
                                "description": "The Australia Post customer number.",
                                "type": "string",
                                "maxLength": 10
                            },
                            "business_name": {
                                "description": "The name of the business for the address.",
                                "type": "string",
                                "maxLength": 40
                            },
                            "type": {
                                "description": "The type of address. Valid values are: PARCEL_LOCKER – an address with this type represents an Australia Post Parcel Locker. PARCEL_COLLECT – an address with this type represents an Australia Post Parcel Collection location. STANDARD_ADDRESS – an address with this type represents a normal delivery address.",
                                "type": "string"
                            },
                            "lines": {
                                "description": "The address lines of the address. Minimum of one address line, up to a maximum of three. The second address line can accommodate up to 60 characters.",
                                "type": "array",
                                "items": [
                                    {
                                    "type": "string",
                                    "maxLength": 40
                                    },
                                    {
                                    "type": "string",
                                    "maxLength": 40
                                    },
                                    {
                                    "type": "string",
                                    "maxLength": 40
                                    }
                                ],
                                "minItems": 1,
                                "maxItems":3
                            },
                            "suburb": {
                                "description": "The suburb for the address.",
                                "type": "string",
                                "maxLength": 40
                            },
                            "state": {
                                "description": "The state code for the address. Valid values are: ACT, NSW, NT, QLD, SA, TAS, VIC, WA.",
                                "type": "string",
                                "maxLength": 10
                            },
                            "postcode": {
                                "description": "The postcode for the address.",
                                "type": "string",
                                "maxLength": 10
                            },
                            "country": {
                                "description": "The country code for the address.",
                                "type": "string",
                                "maxLength": 2
                            },
                            "phone": {
                                "description": "The sender’s phone number.",
                                "type": "string",
                                "maxLength": 20
                            },
                            "email": {
                                "description": "The sender’s email address.",
                                "type": "string",
                                "maxLength": 50
                            },
                            "delivery_instructions": {
                                "description": "Instructions to aid in prompt delivery of the item.",
                                "type": "string",
                                "maxLength": 128
                            }
                        },
                        "required": ["name","lines","suburb"]
                    },
                    "dangerous_goods": {
                        "description": "Dangerous Goods (DG) information. This information is processed by StarTrack products. The DG information will be included in the PDF for dangerous goods (when product is EXP). For Premium products, customers will need to download the IATA DG document and complete it themselves. DG Information is mandatory for StarTrack products when one or more items being sent are marked as dangerous (see the contains_dangerous_goods' field.)",
                        "type": "object",
                        "properties": {
                            "un_number": {
                                "description": "UN numbers are numbers that identify dangerous goods.They are assigned by the United Nations Committee of Experts on the Transport of dangerous goods. This field is an integer value, but must be passed as a string. Examples: 1170, 1789.",
                                "type": "string",
                                "maxLength": 4
                            },
                            "technical_name": {
                                "description": "    Contains the technical or proper shipping name of the dangerous goods. Examples: ETHYL ALCOHOL, ETHANOL.",
                                "type": "string",
                                "maxLength": 35
                            },
                            "net_weight": {
                                "description": "Contains the aggregate net quantity of the dangerous goods (whole kilos or litres). Note this does not include the weight of the packages but represents only the weight of the DG itself. This field is an integer value, but must be passed as a string.",
                                "type": "string",
                                "maxLength": 5
                            },
                            "class_division": {
                                "description": "    Contains the dangerous goods class or division. This field is a decimal value, but must be passed as a string. Examples: 3, 1.4, 2.1.",
                                "type": "string",
                                "maxLength": 7
                            },
                            "subsidiary_risk": {
                                "description": "Contains the dangerous goods subsidiary risk of sub class. This represent the subsidiary risk of a substance, for example, a product may have a primary risk of toxic (class 6.1) with a subsidiary risk of flammable liquid (class 3). This field is a decimal value, but must be passed as a string.",
                                "type": "string",
                                "maxLength": 4
                            },
                            "packing_group_designator": {
                                "description": "Only three roman numerals allowed: I, II and III.",
                                "type": "string",
                                "maxLength": 3
                            },
                            "outer_packaging_type": {
                                "description": "Description of the outer packages in which the dangerous goods are contained.",
                                "type": "string",
                                "maxLength": 25
                            },
                            "outer_packaging_quantity": {
                                "description": "Contains the quantity of the dangerous goods. This quantity is the number of outer packages of each type.",
                                "type": "string",
                                "maxLength": 4
                            }
                        },
                        "required": ["un_number","technical_name","net_weight","class_division","outer_packaging_type","outer_packaging_quantity"]
                    },
                    "movement_type": {
                        "description": "Use 'DESPATCH' to indicate an outbound or normal shipment (this is the default) or 'RETURN' to indicate a returns shipment.",
                        "type": "string",
                        "maxLength": 8
                    },
                    "items": {
                        "description": "An item element is to be supplied for each parcel.",
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "item_reference": {
                                    "description": "A unique reference for the item, generated by the merchant. This value must be unique across all items for the charge account.",
                                    "type": "string",
                                    "maxLength": 50
                                },
                                "product_id": {
                                    "description": "The Australia Post code representing the postage product for the item.",
                                    "type": "string",
                                    "maxLength": 5
                                },
                                "item_description": {
                                    "description": "A description of the item, generated by the merchant.",
                                    "type": "string"
                                },
                                "length": {
                                    "description": "The length of the parcel in centimetres. If volumetric pricing applied then this is mandatory.",
                                    "type": "number"
                                },
                                "width": {
                                    "description": "The width of the parcel in centimetres. If volumetric pricing applied then this is mandatory.",
                                    "type": "number"
                                },
                                "height": {
                                    "description": "The height of the parcel in centimetres. If volumetric pricing applied then this is mandatory.",
                                    "type": "number"
                                },
                                "weight": {
                                    "description": "The parcel’s weight in kilograms. This is mandatory for normal shipments (movement_type = DESPATCH) but must not be specified for returns shipments (movement_type = RETURN).",
                                    "type": "number"
                                },
                                "contains_dangerous_goods": {
                                    "description": "Whether the item contains dangerous goods, generated by the merchant.",
                                    "type": "boolean"
                                },
                                "authority_to_leave": {
                                    "description": "The Australia Post code representing the postage product for the item.",
                                    "type": "boolean"
                                },
                                "allow_partial_delivery": {
                                    "description": "Whether items can be delivered to their final destination as they become available or whether all items in the resulting consignment must be delivered together.",
                                    "type": "boolean"
                                },
                                "packaging_type": {
                                    "description": "The packaging type for this item. Some example values are: CTN, PAL, SAT, BAG, ENV, ITM, JIF, SKI. Note, for StarTrack products, the packaging type (refereed to as a unit type by StarTrack) is mandatory and has a maximum length of 3.",
                                    "type": "string",
                                    "maxLength": 3
                                },
                                "atl_number": {
                                    "description": "The Australia Post code representing the postage product for the item.",
                                    "type": "boolean"
                                },
                                "features": {
                                    "description": "Additional features for the item.",
                                    "type": "object",
                                    "properties": {
                                        "TRANSIT_COVER": {"$ref": "#/definitions/feature"},
                                        "FOO_BAR": {"$ref": "#/definitions/feature"}
                                    }
                                },                                  
                                "tracking_details": {
                                    "description": "The merchant can optionally define the specific consignment, article, and barcode identifiers for the item. If this information is not supplied, Australia Post will generate the identifiers. Important note: if you are generating your own identifiers you must adhere to the specifications provided by Australia Post.",
                                    "type": "object",
                                    "properties": {
                                        "consignment_id": {
                                            "description": "The consignment ID, generated by the merchant, to be assigned to the item.",
                                            "type": "string",
                                            "maxLength": 100
                                        },
                                        "article_id": {
                                            "description": "The article ID, generated by the merchant, to be assigned to the item.",
                                            "type": "string",
                                            "maxLength": 100
                                        },
                                        "barcode_id": {
                                            "description": "The barcode ID, generated by the merchant, to be assigned to the item.",
                                            "type": "string"
                                        }
                                    },
                                    "required": ["consignment_id","article_id","barcode_id"]
                                },
                                "commercial_value": {
                                    "description": "Whether the item has commercial value (i.e. the goods are for resale). This is generated by the merchant and will be shown on the customers form and label.",
                                    "type": "boolean"
                                },
                                "export_declaration_number": {
                                    "description": "Export declaration number (EDN), generated by the merchant. This field is mandatory for item contents worth more than AUD$2000.",
                                    "type": "string",
                                    "minLength": 9,
                                    "maxLength": 12
                                },
                                "classification_type": {
                                    "description": "Category or classification of the goods. If commercial_value is true, then this field must be set to 'OTHER', otherwise it must be set to 'GIFT', 'SAMPLE', 'DOCUMENT' or 'RETURN'",
                                    "type": "string"
                                },
                                "description_of_other": {
                                    "description": "Description of the goods. This is mandatory if classification_type is 'OTHER'.",
                                    "type": "string",
                                    "maxLength": 40
                                },
                                "non_delivery_action": {
                                    "description": "Your desired action if the delivery cannot be completed. You can specify 'RETURN' or 'ABANDONED'. The default if not specified is to return the item by the most economical route or by air.",
                                    "type": "string"
                                },
                                "certificate_number": {
                                    "description": "If you are supplying certificates with your customs forms, you can include the certificate numbers in this field",
                                    "type": "string",
                                    "maxLength": 35
                                },
                                "licence_number": {
                                    "description": "If you are supplying licence information with your customs forms, you can include the licence numbers in this field",
                                    "type": "string",
                                    "maxLength": 35
                                },
                                "invoice_number": {
                                    "description": "Use this field to include an invoice number on the label.",
                                    "type": "string",
                                    "maxLength": 35
                                },
                                "comments": {
                                    "description": "Use this field to include any additional comments on the label.",
                                    "type": "string",
                                    "maxLength": 120
                                },
                                "item_contents": {
                                    "description": "An item_contents element describes part of the contents of the item.",
                                    "type": "object",
                                    "properties": {
                                        "description": {
                                            "description": "Description of the contents. This description is validated against a defined list of keywords, to determine whether the item can be carried by Australia Post and/or the item is prohibited in the destination country",
                                            "type": "string",
                                            "maxLength": 40
                                        },
                                        "quantity": {
                                            "description": "The quantity of this described content.",
                                            "type": "integer"
                                        },
                                        "weight": {
                                            "description": "The weight in kilograms of this described content. If you provide a weight for one item_contents element, you must provide weights for all item_contents elements.",
                                            "type": "number"
                                        },
                                        "value": {
                                            "description": "The value in Australian Dollars of this described content.",
                                            "type": "number",
                                            "maxLength": 40
                                        },
                                        "tariff_code": {
                                            "description": "The Harmonised Tariff number that indicates the type of this described content. It is only mandatory if commercial_value is 'true', otherwise it is optional. However, it is a recommended field to expedite the customs process in the receiving country.",
                                            "type": "integer"
                                        },
                                        "country_of_origin": {
                                            "description": "The country in which this described content was manufactured. It is only mandatory if commercial_value is 'true', otherwise it is optional.",
                                            "type": "string",
                                            "maxLength": 2
                                        }
                                    },
                                    "required": ["description","quantity","value"]
                                }
                            },
                            "required": ["product_id","weight"]
                        }
                    }
                },
                "required": ["from","to","items"]
            }
        }
    },
    "required": ["shipments"]
}